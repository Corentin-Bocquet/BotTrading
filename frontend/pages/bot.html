<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bot - BullSter</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      padding-bottom: 70px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f7f9fc;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 280px;
      height: 100%;
      background-color: #fff;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      transition: all 0.3s;
      z-index: 1050;
      overflow-y: auto;
      padding: 1rem;
    }

    .sidebar.active { left: 0; }

    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.3);
      z-index: 1040;
    }

    .overlay.active { display: block; }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: transparent;
      
      border-top: 2px solid #ddd;
      display: flex;
      justify-content: space-around;
      padding: 0.5rem 0;
      z-index: 1030;
      backdrop-filter: blur(40px);
      border-radius: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);

    }

    .bottom-nav a {
      text-decoration: none;
      color: #6C757D;
      transition: all 0.3s ease;
    }

    .bottom-nav a.active {
      color: #007BFF;
      font-weight: bold;
    }

    .bottom-nav a.active i {
      font-size: 1.5rem;
      color: #007BFF;
      filter: drop-shadow(0 0 5px rgba(0, 123, 255, 0.5));
    }

    .bottom-nav a.active small {
      font-weight: bold;
    }

    .bottom-nav a:hover {
      color: #34495E;
    }

    .bottom-nav i { font-size: 1.3rem; }

    .profile-pic {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid rgb(255, 255, 255, 0.5);
      box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 2rem;
      font-weight: bold;
      border: none;
      background: none;
      padding: 0;
      color: #2C3E50;
      transition: color 0.3s ease;
    }

    .close-btn:hover { color: #E74C3C; }

    .btn-modern {
      display: inline-block;
      padding: 8px 16px;
      font-size: 0.85rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      border: none;
      border-radius: 8px;
      background-color: #2C3E50;
      color: white;
      box-shadow: 0 4px 15px rgba(44, 62, 80, 0.2);
      transition: all 0.3s ease;
      cursor: pointer;
      text-decoration: none;
      width: 100%;
      text-align: center;
      margin-bottom: 15px;
    }

    .btn-modern:hover {
      background-color: #34495E;
      box-shadow: 0 6px 20px rgba(44, 62, 80, 0.3);
      transform: translateY(-2px);
      color: white;
    }

    .btn-modern:active {
      transform: translateY(1px);
      box-shadow: 0 2px 10px rgba(44, 62, 80, 0.2);
    }

    .btn-modern-primary {
      background-color: white;
      box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
      border: 2px solid #000;
    }

    .btn-modern-primary:hover {
      background-color: white;
      box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
    }

    .btn-modern-secondary {
      background-color: transparent;
      color: #E74C3C;
      border: 1px solid #E74C3C;
      box-shadow: 0 4px 15px rgba(231, 76, 60, 0.2);
    }

    .btn-modern-secondary:hover {
      background-color: rgba(231, 76, 60, 0.1);
      color: #E74C3C;
      box-shadow: 0 6px 20px rgba(231, 76, 60, 0.3);
    }

    .sidebar-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      color: #6C757D;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .sidebar-item:hover {
      color: #2C3E50;
    }

    .sidebar-item i {
      font-size: 1.2rem;
      width: 30px;
      text-align: center;
      color: #6C757D;
      transition: color 0.3s ease;
    }

    .sidebar-item:hover i {
      color: #2C3E50;
    }

    .sidebar-item span {
      flex-grow: 1;
      margin-left: 10px;
      font-size: 0.9rem;
    }

    .sidebar-item .arrow {
      font-size: 0.9rem;
      color: #6C757D;
    }

    .btn-icon-modern {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #2C3E50;
      transition: color 0.3s ease;
    }

    .btn-icon-modern:hover { color: #34495E; }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      z-index: 1060;
      padding: 20px;
      overflow-y: auto;
      width: 90vw;
      max-width: 1100px;
      height: 90vh;
      max-height: 700px;
    }

    .modal.active { display: block; }

    #profileModal { max-width: 500px; max-height: 500px; }
    #tradeModal { max-width: 700px; max-height: 450px; }
    #statsModal { max-width: 1100px; max-height: 700px; background: linear-gradient(135deg, #ffffff 0%, #f7f9fc 100%); }
    #aboutModal { max-width: 600px; max-height: 500px; }
    #securityModal { max-width: 600px; max-height: 550px; }
    #helpModal { max-width: 600px; max-height: 600px; }

    .modal-header {
      position: relative;
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-header h5 {
      margin: 0;
      font-size: clamp(1rem, 2.5vw, 1.5rem);
      color: #2C3E50;
      font-weight: 600;
    }

    .modal-close {
      position: absolute;
      top: 0;
      right: 0;
      font-size: clamp(1.5rem, 4vw, 2rem);
      font-weight: bold;
      border: none;
      background: none;
      color: #2C3E50;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .modal-close:hover { color: #E74C3C; }

    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      height: calc(100% - 60px);
    }

    .input-container {
      display: none;
      margin-bottom: 10px;
    }

    .input-container input, .input-container select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: clamp(0.8rem, 2vw, 0.9rem);
    }

    .drop-zone {
      display: none;
      width: 100%;
      height: 100px;
      border: 2px dashed #2C3E50;
      border-radius: 8px;
      text-align: center;
      padding: 20px;
      color: #2C3E50;
      margin-bottom: 10px;
    }

    .drop-zone.dragover { background-color: #ECF0F1; }

    .trade-table {
      width: 100%;
      border-collapse: collapse;
      font-size: clamp(0.8rem, 2vw, 0.9rem);
      background-color: #fff;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
    }

    .trade-table th {
      background-color: #2C3E50;
      color: white;
      padding: 12px;
      text-align: left;
      font-weight: 600;
    }

    .trade-table td {
      padding: 12px;
      border-bottom: 1px solid #ddd;
      
    }

    .trade-table tr:nth-child(even) { background-color: #F9FAFB; }
    .trade-table tr:hover { background-color: #ECF0F1; transition: background-color 0.3s ease; }
    .trade-table .buy { font-weight: bold; color: #28A745; }
    .trade-table .sell { font-weight: bold; color: #E74C3C; }

    .container-fluid {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      background: transparent; /* Assurez-vous que le fond est transparent */
    }

    .logo {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 100px;
      height: auto;
    }

    .upper-section, .lower-section {
      display: flex;
      height: 45vh;
      margin-bottom: 20px;
    }

    .left-section, .right-section {
      flex: 1;
      padding: 20px;
      

      background: rgba(255, 255, 255, 0.1); /* Fond semi-transparent */
  backdrop-filter: blur(10px); /* Ajouter un flou */

      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      overflow-y: auto;
    }

    .left-section { margin-right: 10px; }
    .right-section { margin-left: 10px; }

    button:not(.btn-icon-modern):not(.modal-close):not(.close-btn) {
      color: #61677C;
      font-weight: bold;
      /*box-shadow: -5px -5px 20px #FFF, 5px 5px 20px #BABECC;*/
      transition: all 0.2s ease-in-out;
      cursor: pointer;
      font-weight: 600;
      border: none;
      padding: 12px;
      border-radius: 8px;
      background-color: #fff;
      display: block;
      width: 100%;
      text-align: center;
      margin-bottom: 15px;
    }

    button:not(.btn-icon-modern):not(.modal-close):not(.close-btn):hover {
      box-shadow: -2px -2px 5px #FFF, 2px 2px 5px #BABECC;
    }

    button:not(.btn-icon-modern):not(.modal-close):not(.close-btn):active {
      box-shadow: inset 1px 1px 2px #BABECC, inset -1px -1px 2px #FFF;
    }

    .bot-controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  background: rgb(191, 199, 212);
  gap: 10px;
  width: 100%;
  height: 100%; /* tu peux ajuster */
  padding: 10px;
  overflow: hidden;
}

.bot-controls .btn {
    cursor: pointer;
  width: 100%;
  height: 100%;
}



    .bot-controls #chooseBotBtn {
      color: rgb(17, 173, 234, 0.7); /* Bleu pour "Choisir le bot" */
      grid-column: 1;
  grid-row: 1;
  background: rgba(255, 255, 255, 0.6);
  border: 1.5px solid rgba(255, 255, 255, 0.3);
  box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(70px);
      width:100%;
      height: 100%;
    }

    .bot-controls #chooseBotBtn:hover {
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.4);
      color: rgb(17, 173, 234);
    }

    .bot-controls a {
      text-decoration: none;
    }

    .bot-controls #startBotBtn {
        color: rgb(7, 148, 50, 0.7); /* Vert pour "Lancer le bot" */
      grid-column: 2;
  grid-row: 1;
  width:100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.6);
  border: 1.5px solid rgba(255, 255, 255, 0.3);
  box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(70px);
    }

    .bot-controls #startBotBtn:hover {
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.4);
      color: rgba(7, 149, 50, 1);
    }

    .bot-controls #stopBotBtn {
        color: rgb(185, 5, 5, 0.7); /* Rouge foncé pour "Stopper le bot" */
      grid-column: 1;
  grid-row: 2;
  width:100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.6);
  border: 1.5px solid rgba(255, 255, 255, 0.3);
  box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(70px);
    }

    .bot-controls #stopBotBtn:hover {
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.4);
      color: rgb(185, 5, 5, 1);
    }

    .bot-controls #configBotBtn {
        color: rgba(0, 0, 0, 0.4); /* Rouge foncé pour "Stopper le bot" */
      grid-column: 2;
  grid-row: 2;
  width:100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.6);
  border: 1.5px solid rgba(255, 255, 255, 0.3);
  box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(70px);
    }

    .bot-controls #configBotBtn:hover {
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.4);
      color: rgb(0, 0, 0);
    }

    .bot-stats h3, .bot-description h3, .bot-history h3 {
      color: #2C3E50;
      font-size: 1.5rem;
      margin-bottom: 20px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-item {
      background-color: #F9FAFB;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }

    .stat-item label {
      font-size: 0.9rem;
      color: #6C757D;
    }

    .stat-item span {
      display: block;
      font-size: 1.2rem;
      font-weight: bold;
      color: #2C3E50;
    }

    .stat-item .positive { color: #28A745; }
    .stat-item .negative { color: #E74C3C; }

    .charts-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .chart-wrapper {
      flex: 1;
      min-width: 200px;
      height: 200px;
    }

    .bot-description p {
      color: #34495E;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .bot-description ul {
      list-style: none;
      padding: 0;
      color: #34495E;
    }

    .bot-description ul li {
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .bot-description ul li i {
      margin-right: 8px;
      color: #007BFF;
    }

    .trade-history-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    .trade-history-table thead {
        border-radius: 20px;
    }

    .trade-history-table th {
      background-color: #2C3E50;
      color: white;
      padding: 12px;
      text-align: left;
    }

    .trade-history-table td {
      padding: 12px;
      border-bottom: 1px solid #ddd;
      border-left: 1px dashed #ddd;
      border-right: 1px dashed #ddd;
    }

    .trade-history-table tr:nth-child(even) { background-color: #F9FAFB; }
    .trade-history-table tr:hover { background-color: #ECF0F1; }

    #statsModal .modal-body {
      display: flex;
      flex-direction: column;
      height: calc(100% - 60px);
      gap: 20px;
      padding: 0;
    }

    .stats-upper {
      display: flex;
      flex-direction: row;
      height: 60%;
      gap: 20px;
      padding: 15px;
    }

    .stats-lower {
      height: 40%;
      background-color: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }

    .stats-left, .stats-right {
      flex: 1;
      padding: 15px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }

    .stats-left h6 {
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      color: #2C3E50;
      margin-bottom: 15px;
    }

    .stats-left .gain-value {
      font-size: clamp(1.2rem, 3vw, 1.5rem);
      font-weight: bold;
      color: #28A745;
    }

    .chart-container {
      position: relative;
      height: clamp(80px, 15vw, 100px);
      width: clamp(80px, 15vw, 100px);
      margin: 10px auto;
    }

    .stats-info {
      margin-top: 10px;
      max-height: 150px;
      overflow-y: auto;
    }

    .stats-info p {
      display: flex;
      align-items: center;
      font-size: clamp(0.75rem, 2vw, 0.85rem);
      color: #34495E;
      margin: 6px 0;
    }

    .stats-info i {
      margin-right: 8px;
      font-size: clamp(0.9rem, 2.5vw, 1rem);
    }

    .stats-right canvas {
      max-height: clamp(120px, 25vh, 160px);
      width: 100%;
    }

    .stats-lower canvas {
      max-height: 100%;
      width: clamp(60%, 80vw, 80%);
    }

    @media (max-width: 768px) {
      .sidebar { width: 100%; left: -100%; }
      .modal { width: 95vw; height: 95vh; padding: 15px; }
      .upper-section, .lower-section {
        flex-direction: column;
        height: auto;
      }
      .left-section, .right-section {
        margin: 0 0 20px 0;
      }
      .charts-container {
        flex-direction: column;
      }
      .chart-wrapper {
        height: 150px;
      }
      .stats-upper { flex-direction: column; height: auto; }
      .stats-left, .stats-right { width: 100%; }
      .stats-lower { margin-bottom: 15px; }
      .chart-container { height: 80px; width: 80px; }
      .stats-right canvas { max-height: 120px; }
    }

    @media (max-width: 480px) {
      .modal-header h5 { font-size: 1rem; }
      .modal-close { font-size: 1.5rem; }
      .sidebar-item span { font-size: 0.8rem; }
      .sidebar-item i { font-size: 1rem; }
      button:not(.btn-icon-modern):not(.modal-close):not(.close-btn) { font-size: 0.75rem; padding: 6px 12px; }
      .stats-info p { font-size: 0.7rem; }
      .stats-info i { font-size: 0.8rem; }
    }


    
    .container {
      display: flex;
      flex-wrap: wrap;
      position: relative;
      width: 1000px;
      justify-content: space-between;
      margin: 20px;
      padding: 20px 0;
    }

    .container .card {
        z-index: 1;
      position: relative;
      height: 250px;
      width: 45%;
      margin: 30px 0;
      border-radius: 20px;
      background: #fff;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      display: flex;
    }

    .container .card .imgBx {
      position: absolute;
      top: 10PX;
      left: 10px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      z-index: 1;
      width: calc(100% - 20px);
      height: calc(100% - 20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      overflow: hidden;
      transition: 0.5s ease-in-out;
      z-index: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.1);
    }

    .container .card:hover .imgBx {
      width: 150px;
      height: 150px;
      left: -75px;
      top: calc(50% - 75px);
      z-index: 5;
    }

    


    .container .card .imgBx img {
      max-width: 150px;
      filter: invert(1);
      transition: 0.5s ease-in-out;
    }

    .container .card:hover .imgBx img {
      max-width: 100px;
      filter: invert(1);
      transition: 0.5s ease-in-out;
    }

    .container .card .content {
      position: absolute;
      right: 0;
      width: calc(100% - 75px);
      height: 100%;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container .card .content h3 {
      color: #ff0057;
      margin-bottom: 5px;
      font-size: 24px;
      font-family: 'Poppins', sans-serif;
    }

    .container .card .content a {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 20px;
      border-radius: 5px;
      background: #0095ff;
      text-decoration: none;
      color: #fff;
      font-weight: 500;
    }
    .btn-icon{
        margin-right: 2%;
        width:50px;
        opacity: 0.7;
    }

    .bot-controls .chooseBotBtn:hover .btn-icon{
        opacity: 1;
    }

    .bot-controls .startBotBtn:hover .btn-icon{
        opacity: 1;
    }

    .bot-controls .stopBotBtn:hover .btn-icon{
        opacity: 1;
    }

    .bot-controls .configBotBtn:hover .btn-icon{
        opacity: 1;
    }

    .top-left {
  border-top-left-radius: 10px;
}

.top-right {
  border-top-right-radius: 10px;
}

  </style>
</head>
<body>

  <button class="btn-icon-modern m-3" onclick="toggleSidebar()">
    <i class="bi bi-list fs-2"></i>
  </button>

  <div class="sidebar" id="sidebar">
    <button class="close-btn" onclick="toggleSidebar()">
      <i class="bi bi-x"></i>
    </button>
    <div class="text-center mb-4">
      <img src="" alt="Profil" class="profile-pic mb-2" id="userImage">
      <h5 id="userName"></h5>
      <p id="userInfo" class="mb-1 small text-muted"></p>
      <a href="settings.html" class="btn btn-modern-primary btn-sm">Paramètres</a>
    </div>
    <hr>
    <ul class="list-unstyled">
      <li><a href="#" onclick="toggleTradeModal()" class="sidebar-item"><i class="bi bi-clock-history"></i><span>Historique des trades</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="toggleStatsModal()" class="sidebar-item"><i class="bi bi-bar-chart-line"></i><span>Statistiques pertes/gains</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="toggleProfileModal()" class="sidebar-item"><i class="bi bi-gear"></i><span>Paramètres du profil</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="toggleAboutModal()" class="sidebar-item"><i class="bi bi-info-circle"></i><span>À propos</span><span class="arrow">></span></a></li>
      <li><a href="https://www.trustpilot.com/review/votre-domaine.com" target="_blank" class="sidebar-item"><i class="bi bi-star"></i><span>Évaluer</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="toggleSecurityModal()" class="sidebar-item"><i class="bi bi-lock"></i><span>Sécurité</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="toggleHelpModal()" class="sidebar-item"><i class="bi bi-question-circle"></i><span>Aide</span><span class="arrow">></span></a></li>
      <li><a href="#" onclick="logout()" class="sidebar-item"><i class="bi bi-box-arrow-right"></i><span>Déconnexion</span><span class="arrow">></span></a></li>
    </ul>
    <hr>
    <div class="text-center small text-muted">
      <p>Suivez-nous :</p>
      <div>
        <a href="#" class="me-2"><i class="bi bi-twitter"></i></a>
        <a href="#" class="me-2"><i class="bi bi-facebook"></i></a>
        <a href="#"><i class="bi bi-instagram"></i></a>
      </div>
      <p class="mt-3">Mentions légales & professionnelles</p>
    </div>
  </div>

  <div class="overlay" onclick="toggleSidebar()" id="overlay"></div>

  <img src="logo.png" alt="BullSter Logo" class="logo">

  <div class="container-fluid">
   

    <div class="upper-section">
      <div class="left-section bot-controls">
        <a href="ActionCrypto.html"><button class="chooseBotBtn" id="chooseBotBtn"><img src="Choisir.png" class="btn-icon">Choisir le bot</button></a>
        <button class="startBotBtn" id="startBotBtn"><img src="Lancer.png" class="btn-icon">Lancer le bot</button>
        <button class="stopBotBtn" id="stopBotBtn"><img src="Stop.png" class="btn-icon">Stopper le bot</button>
        <button class="configBotBtn" id="configBotBtn"><img src="Config.png" class="btn-icon">Configuration</button>
      </div>

      <div class="right-section bot-stats">
        <h3>Statistiques du bot</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <label>PNL</label>
            <span class="positive">+3,250 $</span>
          </div>
          <div class="stat-item">
            <label>ROI</label>
            <span class="positive">+15.7%</span>
          </div>
          <div class="stat-item">
            <label>Gains du jour</label>
            <span class="positive">+450 $</span>
          </div>
          <div class="stat-item">
            <label>Pertes du jour</label>
            <span class="negative">-120 $</span>
          </div>
          <div class="stat-item">
            <label>Taux de réussite</label>
            <span>68%</span>
          </div>
          <div class="stat-item">
            <label>Nombre de trades</label>
            <span>42</span>
          </div>
        </div>
        <div class="charts-container">
          <div class="chart-wrapper">
            <canvas id="pnlChart"></canvas>
          </div>
          <div class="chart-wrapper">
            <canvas id="successRateChart"></canvas>
          </div>
          <div class="chart-wrapper">
            <canvas id="tradeVolumeChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="lower-section">
      <div class="left-section bot-description">
        <h3>Description du bot</h3>
        <p>
          Le <strong>Bot Alpha</strong> est un bot de trading automatisé conçu pour maximiser les profits sur les marchés volatils. Il utilise une combinaison d’analyse technique et d’intelligence artificielle pour identifier les opportunités de trading à court terme. Idéal pour les traders cherchant à automatiser leurs stratégies tout en conservant un contrôle total.
        </p>
        <ul>
          <li><i class="bi bi-gear"></i> <strong>Indicateurs utilisés :</strong> RSI, Moyennes Mobiles (50, 200), Bandes de Bollinger</li>
          <li><i class="bi bi-bar-chart"></i> <strong>Taille des positions :</strong> 0.1% à 1% du capital par trade</li>
          <li><i class="bi bi-clock"></i> <strong>Fréquence des analyses :</strong> Toutes les 15 minutes</li>
        </ul>
      </div>

      <div class="right-section bot-history">
        <h3>Historique des ordres</h3>
        <table class="trade-history-table">
          <thead>
            <tr>
              <th class="top-left">Date & Heure</th>
              <th>Actif</th>
              <th>Type</th>
              <th>Taille</th>
              <th>Prix d'entrée</th>
              <th>Status</th>
              <th class="top-right">Classe actif</th>
            </tr>
          </thead>
          <tbody id="tradeHistoryBody">
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="modal" id="profileModal">
    <div class="modal-header">
      <h5>Paramètres du profil</h5>
      <button class="modal-close" onclick="toggleProfileModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body">
      <div>
        <div class="input-container" id="nameInputContainer">
          <input type="text" id="nameInput" placeholder="Entrez votre nom">
        </div>
        <button id="editNameBtn" onclick="toggleEdit('name')">Modifier le nom</button>
      </div>
      <div>
        <div class="input-container" id="firstnameInputContainer">
          <input type="text" id="firstnameInput" placeholder="Entrez votre prénom">
        </div>
        <button id="editFirstnameBtn" onclick="toggleEdit('firstname')">Modifier le prénom</button>
      </div>
      <div>
        <div class="input-container" id="ageInputContainer">
          <input type="number" id="ageInput" placeholder="Entrez votre âge" min="0">
        </div>
        <button id="editAgeBtn" onclick="toggleEdit('age')">Modifier l'âge</button>
      </div>
      <div>
        <div class="input-container" id="sexInputContainer">
          <select id="sexInput">
            <option value="">Choisissez...</option>
            <option value="M">M</option>
            <option value="F">F</option>
          </select>
        </div>
        <button id="editSexBtn" onclick="toggleEdit('sex')">Modifier le sexe</button>
      </div>
      <div>
        <div class="input-container" id="emailInputContainer">
          <input type="email" id="emailInput" placeholder="Entrez votre email">
        </div>
        <button id="editEmailBtn" onclick="toggleEdit('email')">Modifier l'adresse mail</button>
      </div>
      <div>
        <div class="input-container" id="phoneInputContainer">
          <input type="tel" id="phoneInput" placeholder="Entrez votre numéro">
        </div>
        <button id="editPhoneBtn" onclick="toggleEdit('phone')">Modifier le numéro de téléphone</button>
      </div>
      <div>
        <div class="input-container" id="photoInputContainer">
          <div class="drop-zone" id="photoDropZone">Déposez une image ici ou cliquez pour sélectionner</div>
          <input type="file" id="photoInput" accept="image/*" style="display: none;">
        </div>
        <button id="editPhotoBtn" onclick="toggleEdit('photo')">Modifier la photo de profil</button>
      </div>
    </div>
  </div>

  <div class="modal" id="tradeModal">
    <div class="modal-header">
      <h5>Historique des trades</h5>
      <button class="modal-close" onclick="toggleTradeModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body">
      <table class="trade-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Symbole</th>
            <th>Buy / Sell</th>
            <th>Prix</th>
            <th>Quantité</th>
          </tr>
        </thead>
        <tbody id="tradeTableBody">
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal pour Statistiques Pertes/Gains restauré de l'ancien code -->
  <div class="modal" id="statsModal">
    <div class="modal-header">
      <h5>Statistiques Pertes/Gains</h5>
      <button class="modal-close" onclick="toggleStatsModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="stats-upper">
        <div class="stats-left">
          <h6>Gains : <span class="gain-value" id="gain-value"></span></h6>
          <div style="display: flex; justify-content: space-around;">
            <div class="chart-container">
              <canvas id="winPercentageChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="gainLossRatioChart"></canvas>
            </div>
          </div>
          <div class="stats-info">
            <p><i class="bi bi-bar-chart-line"></i> Nombre de positions totales : 50</p>
            <p><i class="bi bi-check-circle text-success"></i> Positions gagnantes : 30 (60%)</p>
            <p><i class="bi bi-dash-circle text-muted"></i> Positions neutres : 5 (10%)</p>
            <p><i class="bi bi-x-circle text-danger"></i> Positions perdantes : 15 (30%)</p>
            <p><i class="bi bi-graph-up text-success"></i> Gains totaux : 15 750 €</p>
            <p><i class="bi bi-graph-down text-danger"></i> Pertes totales : -3 300 €</p>
          </div>
        </div>
        <div class="stats-right">
          <canvas id="bestGainChart"></canvas>
          <canvas id="worstLossChart"></canvas>
        </div>
      </div>
      <div class="stats-lower">
        <canvas id="portfolioEvolutionChart"></canvas>
      </div>
    </div>
  </div>

  <div class="modal" id="aboutModal">
    <div class="modal-header">
      <h5>À propos</h5>
      <button class="modal-close" onclick="toggleAboutModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body" style="color: #34495E;">
      <p class="mb-3">
        <strong><i class="bi bi-bar-chart-fill me-2"></i>Bienvenue sur BullSter</strong><br>
        Votre compagnon de confiance pour le trading et la gestion de portefeuille. Conçu pour les investisseurs de tous niveaux, BullSter vous aide à suivre vos performances, analyser vos positions et améliorer vos stratégies avec précision.
      </p>
      <hr>
      <h6><i class="bi bi-lightbulb-fill me-2 text-warning"></i><strong>Notre mission</strong></h6>
      <p>
        Offrir à chacun, débutant ou professionnel, les outils d’analyse et de gestion les plus puissants dans une interface intuitive et moderne. Plus qu’un outil, BullSter est une plateforme pensée pour vous accompagner à chaque étape de votre parcours d'investissement.
      </p>
      <hr>
      <h6><i class="bi bi-tools me-2 text-primary"></i><strong>Fonctionnalités clés</strong></h6>
      <ul class="list-unstyled ms-3">
        <li><i class="bi bi-graph-up-arrow me-2 text-success"></i>Suivi en temps réel de vos portefeuilles multi-actifs</li>
        <li><i class="bi bi-pie-chart-fill me-2 text-info"></i>Visualisation graphique claire et interactive</li>
        <li><i class="bi bi-bell-fill me-2 text-danger"></i>Alertes personnalisées selon vos critères</li>
        <li><i class="bi bi-shuffle me-2 text-secondary"></i>Comparaison et ajustement de stratégies</li>
        <li><i class="bi bi-database-check me-2 text-success"></i>Historique complet de vos transactions</li>
      </ul>
      <hr>
      <h6><i class="bi bi-people-fill me-2 text-dark"></i><strong>Qui sommes-nous ?</strong></h6>
      <p>
        BullSter est développé par <strong>ISEN</strong>, une équipe passionnée de finance, technologie et design. Nous réunissons des profils variés : ingénieurs, data scientists, UX designers et analystes financiers. Ensemble, nous construisons un outil puissant, centré sur l’utilisateur et pensé pour durer.
      </p>
      <hr>
      <h6><i class="bi bi-flag-fill me-2 text-danger"></i><strong>Nos piliers</strong></h6>
      <ul class="list-unstyled ms-3">
        <li><i class="bi bi-lightning-fill me-2 text-warning"></i><strong>Innovation continue</strong> — Des mises à jour fréquentes et utiles</li>
        <li><i class="bi bi-eye-fill me-2 text-primary"></i><strong>Transparence</strong> — Données claires, aucune complexité inutile</li>
        <li><i class="bi bi-lock-fill me-2 text-secondary"></i><strong>Sécurité</strong> — Vos données protégées avec rigueur</li>
        <li><i class="bi bi-people-fill me-2 text-success"></i><strong>Accessibilité</strong> — Outils conçus pour tous les profils</li>
      </ul>
      <hr>
      <h6><i class="bi bi-binoculars-fill me-2 text-indigo"></i><strong>Notre vision</strong></h6>
      <p>
        Nous imaginons un futur où chaque investisseur, quel que soit son niveau, peut gérer ses actifs en toute autonomie, grâce à une technologie intelligente, pédagogique et évolutive. Intégrations API, IA prédictive, trading collaboratif… ce n’est que le début.
      </p>
      <hr>
      <p class="mb-1"><em>Nous ne vous montrons pas que les chiffres — nous vous aidons à en tirer le meilleur.</em></p>
      <p class="text-muted small">
        <i class="bi bi-info-circle me-1"></i>Version 1.0 — Mise à jour : Avril 2025<br>
        <i class="bi bi-c-circle me-1"></i>2025 BullSter — Tous droits réservés
      </p>
    </div>
  </div>

  <div class="modal" id="securityModal">
    <div class="modal-header">
      <h5>Sécurité</h5>
      <button class="modal-close" onclick="toggleSecurityModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body" style="color: #34495E;">
      <p class="mb-3">
        <strong><i class="bi bi-shield-lock-fill me-2 text-primary"></i>Votre sécurité est notre priorité</strong><br>
        Chez <strong>BullSter</strong>, la protection de vos données et de vos actifs est au cœur de nos préoccupations. Nous mettons en œuvre des technologies de pointe pour garantir un environnement fiable et sécurisé.
      </p>
      <hr>
      <h6><strong><i class="bi bi-shield-check me-2 text-success"></i>Nos mesures de sécurité</strong></h6>
      <ul class="list-unstyled ms-3">
        <li><i class="bi bi-lock-fill me-2 text-dark"></i><strong>Chiffrement de bout en bout (AES-256)</strong> — Vos données sont cryptées à toutes les étapes de transmission et de stockage.</li>
        <li><i class="bi bi-fingerprint me-2 text-warning"></i><strong>Authentification à deux facteurs (2FA)</strong> — Une couche de sécurité supplémentaire pour protéger l’accès à votre compte.</li>
        <li><i class="bi bi-shield-exclamation me-2 text-danger"></i><strong>Surveillance active</strong> — Notre système détecte en temps réel toute tentative d'accès non autorisée ou activité suspecte.</li>
        <li><i class="bi bi-cloud-check-fill me-2 text-info"></i><strong>Hébergement sécurisé</strong> — Infrastructure hébergée sur des serveurs certifiés et conformes aux normes de sécurité internationales (ISO/IEC 27001).</li>
      </ul>
      <hr>
      <h6><strong><i class="bi bi-lightbulb me-2 text-warning"></i>Bonnes pratiques recommandées</strong></h6>
      <ul class="list-unstyled ms-3">
        <li><i class="bi bi-key-fill me-2 text-secondary"></i>Utilisez un mot de passe fort, long et unique.</li>
        <li><i class="bi bi-person-lock me-2 text-secondary"></i>Ne partagez jamais vos identifiants, même temporairement.</li>
        <li><i class="bi bi-lock me-2 text-secondary"></i>Activez la double authentification dès la création de votre compte.</li>
        <li><i class="bi bi-shield-fill-exclamation me-2 text-secondary"></i>Méfiez-vous des tentatives de phishing. <strong>BullSter</strong> ne vous demandera jamais vos identifiants par e-mail.</li>
      </ul>
      <hr>
      <h6><strong><i class="bi bi-envelope-lock me-2"></i>Besoin d'aide ou signalement ?</strong></h6>
      <p class="mb-1">
        Contactez notre équipe sécurité à l’adresse suivante :
        <a href="mailto:corentin.bocquet@student.junia.com">corentin.bocquet@student.junia.com</a>
      </p>
      <hr>
      <p class="text-muted small">
        <i class="bi bi-shield-check me-1"></i>Dernière mise à jour : Avril 2025 — <strong>BullSter</strong> propulsé par <strong>ISEN</strong>
      </p>
    </div>
  </div>

  <div class="modal" id="helpModal">
    <div class="modal-header">
      <h5>Aide</h5>
      <button class="modal-close" onclick="toggleHelpModal()">
        <i class="bi bi-x"></i>
      </button>
    </div>
    <div class="modal-body" style="color: #34495E;">
      <p class="mb-3">
        <strong><i class="bi bi-question-circle-fill me-2 text-primary"></i>Centre d’aide BullSter</strong><br>
        Retrouve ici les réponses aux questions fréquentes et les ressources utiles pour bien utiliser la plateforme.
      </p>
      <hr>
      <h6><strong><i class="bi bi-lightning-fill me-2 text-warning"></i>FAQ rapide</strong></h6>
      <ul class="list-unstyled ms-3">
        <li><i class="bi bi-person-circle me-2 text-info"></i><strong>Comment modifier mon profil ?</strong><br>Accédez à <em>“Paramètres du profil”</em> via la barre latérale.</li>
        <li><i class="bi bi-clipboard-data me-2 text-success"></i><strong>Où consulter mes trades ?</strong><br>Ouvre <em>“Historique des trades”</em> pour suivre toutes tes opérations passées.</li>
        <li><i class="bi bi-unlock me-2 text-danger"></i><strong>Problème de connexion ?</strong><br>Vérifie tes identifiants ou réinitialise ton mot de passe depuis l'écran de connexion.</li>
      </ul>
      <hr>
      <h6><strong><i class="bi bi-book me-2 text-secondary"></i>Besoin d’un coup de main ?</strong></h6>
      <p>
        Consulte notre <a href="#" style="color: #007BFF;">guide utilisateur complet</a> pour une prise en main détaillée de toutes les fonctionnalités de BullSter.
      </p>
      <hr>
      <h6><strong><i class="bi bi-headset me-2 text-success"></i>Assistance et support</strong></h6>
      <p class="mb-1">
        Une question ? Un bug à signaler ? Contactez notre équipe :
        <ul class="list-unstyled ms-3">
          <li><i class="bi bi-envelope-at me-2"></i><a href="mailto:support@votre-domaine.com">support@votre-domaine.com</a></li>
          <li><i class="bi bi-chat-dots me-2"></i>Utilisez le chat en direct intégré à la plateforme</li>
        </ul>
      </p>
      <hr>
      <p class="text-muted small">
        <i class="bi bi-info-circle me-1"></i>Dernière mise à jour : Avril 2025 — <strong>BullSter</strong> propulsé par <strong>ISEN</strong>
      </p>
    </div>
  </div>

  <div class="bottom-nav">
    <a href="learn.html" class="text-dark text-center"><i class="bi bi-journal-code"></i><br><small>Learn</small></a>
    <a href="trade.html" class="text-dark text-center"><i class="bi bi-graph-up-arrow"></i><br><small>Trade</small></a>
    <a href="bot.html" class="text-dark text-center active"><i class="bi bi-cpu"></i><br><small>Bot</small></a>
    <a href="wallet.html" class="text-dark text-center"><i class="bi bi-wallet2"></i><br><small>Wallet</small></a>
    <a href="community.html" class="text-dark text-center"><i class="bi bi-people"></i><br><small>Communauté</small></a>
  </div>

  <script>
    
    const userString = sessionStorage.getItem('user');
    const user = JSON.parse(userString);
    const userInfo = JSON.parse(user);
    console.log(userInfo.firstName + ' ' + userInfo.photo);
    var ordres = [];
    // Afficher la valeur de 'user' dans un élément HTML
    document.getElementById('userName').innerText = `${userInfo.firstName} ${userInfo.lastName}`;
    document.getElementById('userImage').src = `http://217.154.7.154:4000/photo/${userInfo.photo}`;
    var data = [];
    window.addEventListener('DOMContentLoaded', () => {
      const requestOptions = {
        method: "GET",
        redirect: "follow"
      };

      fetch("http://217.154.7.154:3000/api/allorders", requestOptions)
        .then((response) => response.text())
        .then((result) => {
          console.log(result)
          data = JSON.parse(result);
          const tradeHistoryBody = document.getElementById('tradeHistoryBody');
          data.forEach((trade) => {
            const date = new Date(trade.created_at);
            const formatted = date.toLocaleString('fr-FR', {
              day: '2-digit',
              month: '2-digit',
              year: 'numeric',
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit',
            });
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${formatted}</td>
              <td>${trade.symbol}</td>
              <td>${trade.side}</td>
              <td>${trade.qty}</td>
              <td>${trade.filled_avg_price === null ? 'N/A' : trade.filled_avg_price + ' $'}</td>
              <td>${trade.status}</td>
              <td>${trade.asset_class}</td>
            `;
            tradeHistoryBody.appendChild(row);
          })
        .catch((error) => console.error(error));
  });
})

    window.addEventListener('DOMContentLoaded', () => {
      const requestOptions = {
        method: "GET",
        redirect: "follow"
      };

      fetch("http://217.154.7.154:3000/api/account", requestOptions)
        .then((response) => response.text())
        .then((result) => {
          console.log(result)
          var infoCompte = JSON.parse(result);
          var valuePortefeuille = parseFloat(infoCompte.portfolio_value) - 100000;
          document.getElementById('gain-value').innerText = valuePortefeuille + ' €';
        })
        .catch((error) => console.error(error));
    });
  

    const toggleSidebar = () => {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('overlay').classList.toggle('active');
    }

    let activeModal = null;

    const toggleModal = (modalId) => {
      const modal = document.getElementById(modalId);
      if (activeModal && activeModal !== modal) {
        activeModal.classList.remove('active');
      }
      modal.classList.toggle('active');
      if (modal.classList.contains('active')) {
        activeModal = modal;
        if (modalId === 'statsModal') loadStatsCharts();
        if (modalId === 'tradeModal') updateTradeTable();
      } else {
        activeModal = null;
      }
    }

    const toggleProfileModal = () => toggleModal('profileModal');
    const toggleTradeModal = () => toggleModal('tradeModal');
    const toggleStatsModal = () => toggleModal('statsModal');
    const toggleAboutModal = () => toggleModal('aboutModal');
    const toggleSecurityModal = () => toggleModal('securityModal');
    const toggleHelpModal = () => toggleModal('helpModal');

    const logout = async () => {
      await fetch('http://localhost:3000/api/auth/logout', { method: 'POST', credentials: 'include' });
      window.location.href = 'login.html';
    }

    const loadUser = async () => {
      const res = await fetch('http://localhost:3000/api/auth/check', { credentials: 'include' });
      if (!res.ok) {
        window.location.href = 'login.html';
        return;
      }
      const data = await res.json();
      const user = data.user;
      document.getElementById('userName').textContent = user.username;
      document.getElementById('userInfo').textContent = `Email : ${user.email}`;
    }

    const buttonTexts = {
      name: 'Modifier le nom',
      firstname: 'Modifier le prénom',
      age: 'Modifier l\'âge',
      sex: 'Modifier le sexe',
      email: 'Modifier l\'adresse mail',
      phone: 'Modifier le numéro de téléphone',
      photo: 'Modifier la photo de profil'
    };

    const toggleEdit = (field) => {
      const btn = document.getElementById(`edit${field.charAt(0).toUpperCase() + field.slice(1)}Btn`);
      const inputContainer = document.getElementById(`${field}InputContainer`);
      const input = document.getElementById(`${field}Input`);
      if (btn.classList.contains('btn-validate')) {
        if (field === 'photo') {
          if (input.files.length > 0) console.log('Image uploaded:', input.files[0]);
          inputContainer.style.display = 'none';
          btn.textContent = buttonTexts[field];
          btn.classList.remove('btn-validate');
          document.getElementById('photoDropZone').textContent = 'Déposez une image ici ou cliquez pour sélectionner';
        } else {
          const value = input.value.trim();
          if (!value) { alert('Veuillez remplir le champ'); return; }
          if (field === 'age' && isNaN(value)) { alert('Veuillez entrer un nombre valide'); return; }
          if (field === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) { alert('Veuillez entrer une adresse email valide'); return; }
          if (field === 'phone' && !/^\+?\d{9,15}$/.test(value)) { alert('Veuillez entrer un numéro de téléphone valide'); return; }
          console.log(`${field} updated to: ${value}`);
          inputContainer.style.display = 'none';
          btn.textContent = buttonTexts[field];
          btn.classList.remove('btn-validate');
        }
      } else {
        inputContainer.style.display = 'block';
        btn.textContent = 'Valider les modifications';
        btn.classList.add('btn-validate');
        if (field === 'photo') input.click();
      }
    }

    const dropZone = document.getElementById('photoDropZone');
    const photoInput = document.getElementById('photoInput');
    dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('dragover'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('dragover');
      photoInput.files = e.dataTransfer.files;
      if (photoInput.files.length > 0) dropZone.textContent = `Image sélectionnée : ${photoInput.files[0].name}`;
    });
    dropZone.addEventListener('click', () => photoInput.click());
    photoInput.addEventListener('change', () => {
      if (photoInput.files.length > 0) dropZone.textContent = `Image sélectionnée : ${photoInput.files[0].name}`;
    });

    function updateTradeTable() {
      const tbody = document.getElementById('tradeTableBody');
      tbody.innerHTML = '';
      for (let i = 0; i < data.length; i++) {
        const trade = data[i];
        const date = new Date(trade.created_at);
            const formatted = date.toLocaleString('fr-FR', {
              day: '2-digit',
              month: '2-digit',
              year: 'numeric',
            });
        const tr = document.createElement('tr');
        const tdDate = document.createElement('td'); tdDate.textContent = formatted;
        const tdSymbol = document.createElement('td'); tdSymbol.textContent = trade.symbol;
        const tdType = document.createElement('td'); tdType.textContent = trade.side; tdType.className = trade.side.toLowerCase() === 'buy' ? 'buy' : 'sell';
        const tdPrice = document.createElement('td'); tdPrice.textContent = trade.filled_avg_price === null ? 'N/A' : trade.filled_avg_price + ' $';
        const tdQuantity = document.createElement('td'); tdQuantity.textContent = trade.qty;
        tr.appendChild(tdDate); tr.appendChild(tdSymbol); tr.appendChild(tdType); tr.appendChild(tdPrice); tr.appendChild(tdQuantity);
        tbody.appendChild(tr);
      }
    }

    function addTrade(date, symbol, type, price, quantity) {
      tradesData.push({ date, symbol, type, price, quantity });
      updateTradeTable();
    }

    function simulateNewTrade() {
      const newTrade = { date: new Date().toISOString().split('T')[0], symbol: 'SOL', type: 'Buy', price: '150 $', quantity: '10' };
      addTrade(newTrade.date, newTrade.symbol, newTrade.type, newTrade.price, newTrade.quantity);
    }

    function loadStatsCharts() {
      const winPercentageCtx = document.getElementById('winPercentageChart').getContext('2d');
      new Chart(winPercentageCtx, {
        type: 'doughnut',
        data: { labels: ['Gagnantes', 'Perdantes/Neutres'], datasets: [{ data: [60, 40], backgroundColor: ['#28A745', '#E74C3C'], borderWidth: 0 }] },
        options: { cutout: '70%', plugins: { legend: { display: false }, tooltip: { enabled: false }, title: { display: true, text: 'Positions Gagnantes', position: 'bottom', color: '#2C3E50', font: { size: 12 } } }, maintainAspectRatio: false },
        plugins: [{
          id: 'centerText',
          beforeDraw(chart) {
            const { width, height, ctx, chartArea } = chart;
            ctx.restore();
            const fontSize = Math.min(width, height) * 0.15;
            ctx.font = `bold ${fontSize}px Segoe UI`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = '#2C3E50';
            const text = '60%';
            const textX = chartArea.left + (chartArea.right - chartArea.left) / 2;
            const textY = chartArea.top + (chartArea.bottom - chartArea.top) / 2;
            ctx.fillText(text, textX, textY);
            ctx.save();
          }
        }]
      });

      const gainLossRatioCtx = document.getElementById('gainLossRatioChart').getContext('2d');
      new Chart(gainLossRatioCtx, {
        type: 'doughnut',
        data: { labels: ['Gains', 'Pertes'], datasets: [{ data: [82.6, 17.4], backgroundColor: ['#28A745', '#E74C3C'], borderWidth: 0 }] },
        options: { cutout: '70%', plugins: { legend: { display: false }, tooltip: { enabled: false }, title: { display: true, text: 'Ratio Gains/Pertes', position: 'bottom', color: '#2C3E50', font: { size: 12 } } }, maintainAspectRatio: false },
        plugins: [{
          id: 'centerText',
          beforeDraw(chart) {
            const { width, height, ctx, chartArea } = chart;
            ctx.restore();
            const fontSize = Math.min(width, height) * 0.15;
            ctx.font = `bold ${fontSize}px Segoe UI`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = '#2C3E50';
            const text = '4.77:1';
            const textX = chartArea.left + (chartArea.right - chartArea.left) / 2;
            const textY = chartArea.top + (chartArea.bottom - chartArea.top) / 2;
            ctx.fillText(text, textX, textY);
            ctx.save();
          }
        }]
      });

      const bestGainCtx = document.getElementById('bestGainChart').getContext('2d');
      new Chart(bestGainCtx, {
        type: 'bar',
        data: { labels: ['Plus Gros Gain'], datasets: [{ label: 'Gain Maximum', data: [5230], backgroundColor: '#28A745', borderRadius: 5 }, { label: 'Gain Moyen', data: [2490], backgroundColor: 'rgba(40, 167, 69, 0.5)', borderRadius: 5 }] },
        options: { indexAxis: 'y', scales: { x: { display: false, max: 6000 }, y: { display: true } }, plugins: { legend: { display: false }, title: { display: true, text: 'Meilleur Gain (€)', color: '#2C3E50', font: { size: 14 } } }, maintainAspectRatio: false }
      });

      const worstLossCtx = document.getElementById('worstLossChart').getContext('2d');
      new Chart(worstLossCtx, {
        type: 'bar',
        data: { labels: ['Plus Grosse Perte'], datasets: [{ label: 'Perte Maximum', data: [1950], backgroundColor: '#E74C3C', borderRadius: 5 }, { label: 'Perte Moyenne', data: [660], backgroundColor: 'rgba(231, 76, 60, 0.5)', borderRadius: 5 }] },
        options: { indexAxis: 'y', scales: { x: { display: false, max: 2000 }, y: { display: true } }, plugins: { legend: { display: false }, title: { display: true, text: 'Pire Perte (€)', color: '#2C3E50', font: { size: 14 } } }, maintainAspectRatio: false }
      });

      const portfolioEvolutionCtx = document.getElementById('portfolioEvolutionChart').getContext('2d');
      new Chart(portfolioEvolutionCtx, {
        type: 'line',
        data: { labels: ['Jan 2025', 'Fév', 'Mar', 'Avr'], datasets: [{ label: 'Valeur du portefeuille (€)', data: [5000, 7500, 11000, 12450], borderColor: '#007BFF', backgroundColor: 'rgba(0, 123, 255, 0.1)', fill: true, tension: 0.4, pointBackgroundColor: '#007BFF', pointBorderColor: '#fff', pointBorderWidth: 2 }] },
        options: { scales: { y: { beginAtZero: false, title: { display: true, text: 'Valeur (€)', color: '#2C3E50' } }, x: { title: { display: true, text: 'Mois', color: '#2C3E50' } } }, plugins: { legend: { display: false }, title: { display: true, text: 'Évolution du Portefeuille', color: '#2C3E50', font: { size: 16 } } }, maintainAspectRatio: false }
      });
    }

    function loadBotCharts() {
      const pnlCtx = document.getElementById('pnlChart').getContext('2d');
      new Chart(pnlCtx, {
        type: 'line',
        data: { labels: ['Jour 1', 'Jour 2', 'Jour 3', 'Jour 4', 'Jour 5'], datasets: [{ label: 'PNL ($)', data: [100, 500, 1200, 2000, 3250], borderColor: '#28A745', fill: false, tension: 0.4 }] },
        options: { scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false }, title: { display: true, text: 'Évolution PNL', color: '#2C3E50' } }, maintainAspectRatio: false }
      });

      const successRateCtx = document.getElementById('successRateChart').getContext('2d');
      new Chart(successRateCtx, {
        type: 'doughnut',
        data: { labels: ['Réussite', 'Échec'], datasets: [{ data: [68, 32], backgroundColor: ['#28A745', '#E74C3C'], borderWidth: 0 }] },
        options: { cutout: '70%', plugins: { legend: { display: false }, title: { display: true, text: 'Taux de Réussite', color: '#2C3E50' } }, maintainAspectRatio: false }
      });

      const tradeVolumeCtx = document.getElementById('tradeVolumeChart').getContext('2d');
      new Chart(tradeVolumeCtx, {
        type: 'bar',
        data: { labels: ['Jour 1', 'Jour 2', 'Jour 3', 'Jour 4', 'Jour 5'], datasets: [{ label: 'Volume', data: [5, 8, 10, 12, 7], backgroundColor: '#007BFF' }] },
        options: { scales: { y: { beginAtZero: true } }, plugins: { legend: { display: false }, title: { display: true, text: 'Volume des Trades', color: '#2C3E50' } }, maintainAspectRatio: false }
      });
    }

    loadUser();
    updateTradeTable();
    loadBotCharts();
    setTimeout(simulateNewTrade, 3000);
  </script>
</body>
</html>